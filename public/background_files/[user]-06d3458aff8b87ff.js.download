(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{51367:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/users/[user]",function(){return n(90853)}])},90853:function(e,t,n){"use strict";n.r(t);var r=n(34051),s=n.n(r),o=n(85893),a=(n(83454),n(67294)),i=n(67471),l=n(96857),u=n(44681),c=n(40169),d=n(91962),f=n(59700),p=n(38945),h=n(1848),m=n(8639),x=n(20640),v=n.n(x),g=n(41664),b=n(11163),j=n(44012),w=n(86896),y=n(1852),N=n(88305),k=n(60204),_=n(36090),Z=n(60670),C=n(50073),S=n(2213),O=n(70206),A=n(40031),E=n(73149),L=n(45591),M=n(4154),B=n(95611),F=n(66320),I=n(27461),U=n(45332),D=n(27226),P=n(22379);function T(e,t,n,r,s,o,a){try{var i=e[o](a),l=i.value}catch(u){return void n(u)}i.done?t(l):Promise.resolve(l).then(r,s)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){T(o,r,s,a,i,"next",e)}function i(e){T(o,r,s,a,i,"throw",e)}a(void 0)}))}}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}var V=function(e){var t,n,r,x,T=e.id,W=e.username,V=e.userData,z=(e.otherUsers,(0,N.u)(L.w).useListOfJobs),H=(0,N.u)(M.V),Q=H.setModalState,J=(H.setQuery,H.query),X=H.setQueryVal,G=H.setTempQuery,K=H.fullWidth,Y=(0,E.aC)(),$=Y.userInfo,ee=Y.modCheck,te=(0,B.Z)(V),ne=te.handleFollow,re=te.followed,se=(0,b.useRouter)(),oe=(0,y.useMediaQuery)({maxWidth:768}),ae=(0,a.useState)(!0),ie=ae[0],le=ae[1],ue=z({defaultSort:"hot",initialSettings:R({jobStatus:"completed",userId:T,search:"advanced"},T===(null===$||void 0===$?void 0:$.id)?{isPublished:"true"}:{},{orderBy:(null===(t=se.query)||void 0===t?void 0:t.sort)||"hot",minRankingScore:"0"})});(0,a.useEffect)((function(){var e,t,n;(null===(e=se.query)||void 0===e||null===(t=e.search)||void 0===t?void 0:t.length)>0&&(ue.settings.prompt=(null===(n=se.query)||void 0===n?void 0:n.search)||null);return setTimeout((function(){return ue.firstLoad()}),1),function(){X(""),G("")}}),[]),(0,a.useEffect)((function(){ue.jobsList.length>0&&Q((function(e){return R({},e,{jobDataArray:ue.jobsList,jobDataArrayCache:ue.jobsList})}))}),[ue.jobsList,Q]),(0,a.useEffect)((function(){ue.isFirstRun||ue.settings.prompt===J&&!!ue.settings.prompt===!!J||(J&&(ue.settings.prompt=J),ue.search())}),[ue.isFirstRun,ue.settings.prompt,J]);var ce=(0,a.useState)(!1),de=ce[0],fe=ce[1],pe=(0,a.useMemo)((function(){return[oe&&{title:"View archive",link:"/app/users/".concat(T,"/archive"),icon:(0,o.jsx)(i.Z,{height:18})},oe&&{title:re?"Unfollow":"Follow",warn:re,onClick:ne,icon:re?(0,o.jsx)(l.Z,{height:"16",className:""}):(0,o.jsx)(u.Z,{height:"16",className:""}),slug:"follow"},oe&&ee("moderator")&&{title:"break-9"},ee("moderator")&&{title:"Mod Actions",disabled:!0,icon:(0,o.jsx)(c.Z,{height:"16",className:""}),optionArray:[{title:"Copy ID",onClick:function(){return v()(T)},icon:(0,o.jsx)(d.Z,{height:"16"}),slug:"copy-userid"},{title:"Contact",onClick:function(){var e=prompt("What is your message for ".concat(W,"?"));e&&fetch("/api/app/users/mod-contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:T,message:e.trim()})}).then(function(){var e=q(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:!(null===(n=e.sent)||void 0===n?void 0:n.error)&&t.ok?(0,D.z5)("Message sent!"):(0,D.x8)("Message failed to send: ".concat(t.status," ").concat((null===n||void 0===n?void 0:n.error)||t.statusText," (").concat(n.trace,")"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(0,D.x8)("Error sending message: ".concat(e))}))},icon:(0,o.jsx)(f.Z,{height:"16",className:""})},ee("community")&&{title:"Wipe User",danger:!0,onClick:function(){confirm("Are you sure you want to wipe all jobs for ".concat(W,"?"))&&confirm("Absolutely, 100% super-duper sure you want to wipe all jobs for ".concat(W,"?"))&&fetch("/api/mod/wipe-user",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:T})}).then((function(e){200===e.status?(0,D.z5)("User wiped! Reload the page to see changes."):(0,D.x8)("Something went wrong: : ".concat(e.status," ").concat(e.statusText))})).catch((function(e){(0,D.x8)("Something went wrong: ".concat(e))}))},icon:(0,o.jsx)(p.Z,{height:"16",className:""})}].filter(Boolean)}].filter(Boolean)}),[re,ne,T,oe,ee,W]),he=(0,a.useMemo)((function(){return(0,o.jsxs)(o.Fragment,{children:[!oe&&(0,o.jsxs)(Z.Z,{href:"/app/users/".concat(T,"/archive"),className:"group min-w-max max-w-max !font-bold !px-6 text-darkBlue-500 rounded-full .border-2 bg-slate-300 hover:!bg-slate-200 flex gap-2 items-center justify-center !bg-opacity-100",children:[(0,o.jsx)(i.Z,{height:18})," ",(0,o.jsx)("span",{className:"hidden md:inline",children:(0,o.jsx)(j.Z,{id:"nav.archive"})})]},"archive"),!oe&&(0,o.jsx)(_.Z,{onClick:function(){fe(!0),ne()},onMouseLeave:function(){return fe(!1)},className:"group-button min-w-max max-w-max !font-bold !px-6 text-darkBlue-500 rounded-full .border-2 bg-slate-300  flex gap-2 items-center justify-center !bg-opacity-100 ".concat(re&&!de?" hover:border-red-700 hover:text-red-200 hover:!bg-red-900 ":"hover:!bg-slate-200"),children:re?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:de?"flex":"flex [.group-button:hover_&]:hidden",children:"Following"}),(0,o.jsx)("span",{className:de?"hidden":"hidden [.group-button:hover_&]:flex relative before:text-transparent before:content-['Following']",children:(0,o.jsx)("span",{className:"absolute centerAbs",children:"Unfollow"})})]}):(0,o.jsx)("span",{className:"flex relative before:text-transparent before:content-['Following']",children:(0,o.jsxs)("span",{className:"flex absolute justify-center items-center centerAbs",children:[(0,o.jsx)(u.Z,{height:18,className:"mr-2 inline"}),(0,o.jsx)(j.Z,{id:"app.follow"})]})})},"followButton"),oe||ee("moderator")&&(0,o.jsx)(S.Z,{optionArray:pe,maxWidth:"!w-max",placement:"top-end",className:"h-full",offset:[0,10],transformOrigin:"top-right",buttonHoverStyle:"!rounded-full",children:(0,o.jsx)(_.Z,{className:(0,U.CN)("group aspect-square md:text-darkBlue-500 rounded-full .border-2 bg-slate-100/5  md:bg-slate-300 md:hover:!bg-slate-200 flex gap-2 items-center justify-center !bg-opacity-100"),children:(0,o.jsx)(h.Z,{height:oe?18:24})},"options")})]})}),[pe,de,re,ne,T,oe,ee]),me=(0,a.useMemo)((function(){var e;return(null===V||void 0===V?void 0:V.created)?"".concat(null===(e=(0,U.L0)(new Date(null===V||void 0===V?void 0:V.created),!0)[1])||void 0===e?void 0:e.replace(" 2022","").replace(",","")):"Unknown"}),[null===V||void 0===V?void 0:V.created]),xe=(0,w.Z)();return(0,o.jsxs)(I.o,{title:W||"User",fullWidth:K,className:U.VU,icon:(0,o.jsx)(P.Avatar,{user:T,avatar:null===V||void 0===V?void 0:V.avatar_job_id,size:32}),meta:(0,o.jsx)(F.h,{title:xe.formatMessage({id:"app.usersGallery"},{user:W}),description:xe.formatMessage({id:"app.allTheImages"},{id:T})}),children:[(0,o.jsx)(P.UserBanner,{bannerUrl:"https://mj-gallery.com/".concat((null===V||void 0===V?void 0:V.cover_job_id)||(null===(n=ue.jobsList)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.state.id),"/grid_0.webp"),username:W,children:(0,o.jsx)(P.UserBannerInfo,{avatar:V.avatar_job_id,tagline:(0,o.jsx)("p",{children:(0,o.jsxs)("span",{className:"text-slate-500",children:[(0,o.jsx)(j.Z,{id:"app.userSince"})," ",me]})}),user:V,username:W,customButtons:he})}),ie&&(0,o.jsxs)("div",{className:"flex relative flex-col gap-4 md:px-4 mt-4 md:mt-2 mb-6 w-full xl:my-6",children:[(0,o.jsxs)("div",{className:"flex justify-between px-2 -mb-3 w-full text-base",children:[(0,o.jsx)("p",{className:"font-medium text-slate-400"}),(0,o.jsx)(g.default,{href:"/app/users/".concat(T,"/collections"),children:(0,o.jsxs)("a",{href:"",className:"text-slate-500 hover:text-slate-300",children:[(0,o.jsx)(j.Z,{id:"app.viewAllCollections"})," ",(0,o.jsx)(m.Z,{height:18,className:"inline -rotate-45"})]})})]}),(0,o.jsx)(k.Z,{userId:T,home:!0,hideCallback:function(){return le(!1)},className:"overflow-x-scroll gap-4 py-2 w-full miniScrollbar",buttonClassName:"md:basis-1 max-w-[50%] md:max-w-[33%]",showAddButton:!1,maxItems:4,publicDisplay:!0})]}),(0,o.jsx)(O.x,{fixedData:ue,params:{showService:!0}}),(0,o.jsx)(A.H,{query:null===(x=se.query)||void 0===x?void 0:x.jobId,returnHref:"/app/users/".concat(T)}),(0,o.jsx)(C.Z,{fixedData:ue,settings:{dedupe:!1}})]})};V.getInitialProps=function(){var e=q(s().mark((function e(t){var n,r,o,a,i,l,u,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.query.user,e.next=11;break;case 5:if(null===(a=e.sent)||void 0===a?void 0:a.user_id){e.next=9;break}return(0,U.FA)(t,"/app/users/".concat(a.user_id)),e.abrupt("return",{});case 9:return(0,U.FA)(t,"/app/users/".concat(a.user_id)),e.abrupt("return",{});case 11:return e.next=13,fetch("".concat("https://www.midjourney.com","/api/app/users/?userIds=").concat(t.query.user),{headers:{Cookie:null===(n=t.req)||void 0===n?void 0:n.headers.cookie}});case 13:return i=e.sent,e.next=16,i.json();case 16:return l=e.sent,u=[null===(r=l[0])||void 0===r?void 0:r.user_id,null===(o=l[0])||void 0===o?void 0:o.username],d=u[1],(c=u[0])&&d||(0,U.FA)(t,"/404"),e.abrupt("return",{id:c,username:d,userData:l[0],otherUsers:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=V},59700:function(e,t,n){"use strict";var r=n(67294);const s=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}))}));t.Z=s}},function(e){e.O(0,[9774,2888,179],(function(){return t=51367,e(e.s=t);var t}));var t=e.O();_N_E=t}]);